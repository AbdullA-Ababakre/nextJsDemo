{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/bytedance/Desktop/06-onwards-to-a-bigger-project-starting-project/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/bytedance/Desktop/06-onwards-to-a-bigger-project-starting-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/bytedance/Desktop/06-onwards-to-a-bigger-project-starting-project/pages/signin.js\",\n    _s = $RefreshSig$();\n\nimport { signIn } from \"next-auth/react\";\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nexport var __N_SSP = true;\nexport default function SignIn(_ref) {\n  _s();\n\n  var _this = this;\n\n  var csrfToken = _ref.csrfToken,\n      providers = _ref.providers;\n  var router = useRouter();\n\n  var _useState = useState(''),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(null),\n      message = _useState3[0],\n      setMessage = _useState3[1];\n\n  var signInUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var options, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"email\", email);\n              console.log(\"password\", password);\n              e.preventDefault();\n              options = {\n                redirect: false,\n                email: email,\n                password: password\n              };\n              _context.next = 6;\n              return signIn('credentials', options);\n\n            case 6:\n              res = _context.sent;\n              console.log(\"ress----\", res); // setMessage(null);\n              // if (res?.error) {\n              //     setMessage(res.error);\n              // }\n              // return router.push('/');\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function signInUser(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signUpUser = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var res, data, options, _res;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return fetch('/api/register', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  email: email,\n                  password: password\n                })\n              });\n\n            case 3:\n              res = _context2.sent;\n              _context2.next = 6;\n              return res.json();\n\n            case 6:\n              data = _context2.sent;\n\n              if (data.message) {\n                setMessage(data.message);\n              }\n\n              if (!(data.message == \"Registered successfully\")) {\n                _context2.next = 13;\n                break;\n              }\n\n              options = {\n                redirect: false,\n                email: email,\n                password: password\n              };\n              _context2.next = 12;\n              return signIn(\"credentials\", options);\n\n            case 12:\n              _res = _context2.sent;\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function signUpUser(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"csrfToken\",\n        type: \"hidden\",\n        defaultValue: csrfToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Email address\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          name: \"email\",\n          value: email,\n          onChange: function onChange(e) {\n            return setEmail(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick(e) {\n          return signInUser(e);\n        },\n        children: \"Sign in with Credentials\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick(e) {\n          return signUpUser(e);\n        },\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), Object.values(providers).map(function (provider) {\n      if (provider.name === 'Email' || provider.name === 'Credentials') {\n        return;\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: function onClick() {\n            return signIn(provider.id);\n          },\n          children: [\"Sign in with \", provider.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }, _this)\n      }, provider.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }, _this);\n    })]\n  }, void 0, true);\n}\n\n_s(SignIn, \"/20WMbTYCTzx+g8ZjG2132HsIzU=\", false, function () {\n  return [useRouter];\n});\n\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/bytedance/Desktop/06-onwards-to-a-bigger-project-starting-project/pages/signin.js"],"names":["signIn","useState","useEffect","useRouter","SignIn","csrfToken","providers","router","email","setEmail","password","setPassword","message","setMessage","signInUser","e","console","log","preventDefault","options","redirect","res","signUpUser","fetch","method","headers","body","JSON","stringify","json","data","target","value","color","Object","values","map","provider","name","id"],"mappings":";;;;;;;;AAAA,SAAqCA,MAArC,QAA+D,iBAA/D;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;;AAEA,eAAe,SAASC,MAAT,OAA0C;AAAA;;AAAA;;AAAA,MAAxBC,SAAwB,QAAxBA,SAAwB;AAAA,MAAbC,SAAa,QAAbA,SAAa;AACrD,MAAMC,MAAM,GAAGJ,SAAS,EAAxB;;AADqD,kBAE3BF,QAAQ,CAAC,EAAD,CAFmB;AAAA,MAE9CO,KAF8C;AAAA,MAEvCC,QAFuC;;AAAA,mBAGrBR,QAAQ,CAAC,EAAD,CAHa;AAAA,MAG9CS,QAH8C;AAAA,MAGpCC,WAHoC;;AAAA,mBAIvBV,QAAQ,CAAC,IAAD,CAJe;AAAA,MAI9CW,OAJ8C;AAAA,MAIrCC,UAJqC;;AAMrD,MAAMC,UAAU;AAAA,yEAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBT,KAArB;AACAQ,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBP,QAAxB;AACAK,cAAAA,CAAC,CAACG,cAAF;AACIC,cAAAA,OAJW,GAID;AAAEC,gBAAAA,QAAQ,EAAE,KAAZ;AAAmBZ,gBAAAA,KAAK,EAALA,KAAnB;AAA0BE,gBAAAA,QAAQ,EAARA;AAA1B,eAJC;AAAA;AAAA,qBAKGV,MAAM,CAAC,aAAD,EAAgBmB,OAAhB,CALT;;AAAA;AAKTE,cAAAA,GALS;AAMfL,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,GAAxB,EANe,CAOf;AACA;AACA;AACA;AAEA;;AAZe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVP,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAgBA,MAAMQ,UAAU;AAAA,yEAAG,kBAAOP,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfA,cAAAA,CAAC,CAACG,cAAF;AADe;AAAA,qBAEGK,KAAK,CAAC,eAAD,EAAkB;AACrCC,gBAAAA,MAAM,EAAE,MAD6B;AAErCC,gBAAAA,OAAO,EAAE;AACL,kCAAgB;AADX,iBAF4B;AAKrCC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEpB,kBAAAA,KAAK,EAALA,KAAF;AAASE,kBAAAA,QAAQ,EAARA;AAAT,iBAAf;AAL+B,eAAlB,CAFR;;AAAA;AAETW,cAAAA,GAFS;AAAA;AAAA,qBASEA,GAAG,CAACQ,IAAJ,EATF;;AAAA;AASXC,cAAAA,IATW;;AAWf,kBAAIA,IAAI,CAAClB,OAAT,EAAkB;AACdC,gBAAAA,UAAU,CAACiB,IAAI,CAAClB,OAAN,CAAV;AACH;;AAbc,oBAcXkB,IAAI,CAAClB,OAAL,IAAgB,yBAdL;AAAA;AAAA;AAAA;;AAePO,cAAAA,OAfO,GAeG;AAAEC,gBAAAA,QAAQ,EAAE,KAAZ;AAAmBZ,gBAAAA,KAAK,EAALA,KAAnB;AAA0BE,gBAAAA,QAAQ,EAARA;AAA1B,eAfH;AAAA;AAAA,qBAgBOV,MAAM,CAAC,aAAD,EAAgBmB,OAAhB,CAhBb;;AAAA;AAgBLE,cAAAA,IAhBK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVC,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAqBA,sBACI;AAAA,4BAUI;AAAM,MAAA,MAAM,EAAC,EAAb;AAAA,8BACI;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,IAAI,EAAC,QAA7B;AAAsC,QAAA,YAAY,EAAEjB;AAApD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,iDAEI;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,EAAE,EAAC,OAAvB;AAA+B,UAAA,IAAI,EAAC,OAApC;AAA4C,UAAA,KAAK,EAAEG,KAAnD;AAA0D,UAAA,QAAQ,EAAE,kBAAAO,CAAC;AAAA,mBAAIN,QAAQ,CAACM,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAZ;AAAA;AAArE;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAMI;AAAA,4CAEI;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,EAAE,EAAC,UAAvB;AAAkC,UAAA,IAAI,EAAC,UAAvC;AAAkD,UAAA,KAAK,EAAEtB,QAAzD;AAAmE,UAAA,QAAQ,EAAE,kBAAAK,CAAC;AAAA,mBAAIJ,WAAW,CAACI,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAf;AAAA;AAA9E;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ,eAUI;AAAG,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAAV;AAAA,kBAA6BrB;AAA7B;AAAA;AAAA;AAAA;AAAA,cAVJ,eAWI;AAAQ,QAAA,OAAO,EAAE,iBAACG,CAAD;AAAA,iBAAOD,UAAU,CAACC,CAAD,CAAjB;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXJ,eAYI;AAAQ,QAAA,OAAO,EAAE,iBAACA,CAAD;AAAA,iBAAOO,UAAU,CAACP,CAAD,CAAjB;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAVJ,EA4BQmB,MAAM,CAACC,MAAP,CAAc7B,SAAd,EAAyB8B,GAAzB,CAA6B,UAACC,QAAD,EAAc;AACvC,UAAIA,QAAQ,CAACC,IAAT,KAAkB,OAAlB,IAA6BD,QAAQ,CAACC,IAAT,KAAkB,aAAnD,EAAkE;AAC9D;AACH;;AACD,0BACI;AAAA,+BACI;AAAQ,UAAA,OAAO,EAAE;AAAA,mBAAMtC,MAAM,CAACqC,QAAQ,CAACE,EAAV,CAAZ;AAAA,WAAjB;AAAA,sCACkBF,QAAQ,CAACC,IAD3B;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,SAAUD,QAAQ,CAACC,IAAnB;AAAA;AAAA;AAAA;AAAA,eADJ;AAOH,KAXD,CA5BR;AAAA,kBADJ;AA4CH;;GAvFuBlC,M;UACLD,S;;;KADKC,M","sourcesContent":["import { getCsrfToken, getProviders, signIn, getSession } from \"next-auth/react\";\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\n\nexport default function SignIn({ csrfToken, providers }) {\n    const router = useRouter();\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [message, setMessage] = useState(null);\n\n    const signInUser = async (e) => {\n        console.log(\"email\", email);\n        console.log(\"password\", password);\n        e.preventDefault();\n        let options = { redirect: false, email, password }\n        const res = await signIn('credentials', options);\n        console.log(\"ress----\", res);\n        // setMessage(null);\n        // if (res?.error) {\n        //     setMessage(res.error);\n        // }\n\n        // return router.push('/');\n    }\n\n\n    const signUpUser = async (e) => {\n        e.preventDefault();\n        const res = await fetch('/api/register', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n        let data = await res.json();\n\n        if (data.message) {\n            setMessage(data.message)\n        }\n        if (data.message == \"Registered successfully\") {\n            let options = { redirect: false, email, password }\n            const res = await signIn(\"credentials\", options)\n            // return router.push(\"/\");\n        }\n    }\n\n    return (\n        <>\n            {/* <form method=\"post\" action=\"/api/auth/signin/email\">\n                <input name=\"csrfToken\" type=\"hidden\" defaultValue={csrfToken} />\n                <label>\n                    Email address\n                    <input type=\"email\" id=\"email\" name=\"email\" />\n                </label>\n                <button type=\"submit\">Sign in with Email</button>\n            </form> */}\n\n            <form action=\"\">\n                <input name=\"csrfToken\" type=\"hidden\" defaultValue={csrfToken} />\n                <label>\n                    Email address\n                    <input type=\"email\" id=\"email\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} />\n                </label>\n                <label>\n                    Password\n                    <input type=\"email\" id=\"password\" name=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\n                </label>\n                <p style={{ color: 'red' }}>{message}</p>\n                <button onClick={(e) => signInUser(e)}>Sign in with Credentials</button>\n                <button onClick={(e) => signUpUser(e)}>Sign Up</button>\n            </form>\n\n\n\n            {\n                Object.values(providers).map((provider) => {\n                    if (provider.name === 'Email' || provider.name === 'Credentials') {\n                        return;\n                    }\n                    return (\n                        <div key={provider.name}>\n                            <button onClick={() => signIn(provider.id)}>\n                                Sign in with {provider.name}\n                            </button>\n                        </div>\n                    )\n                })\n            }\n        </>\n    )\n}\n\nexport async function getServerSideProps(context) {\n    const { req } = context;\n    const session = await getSession({ req })\n    if (session) {\n        // Signed in\n        return {\n            redirect: { destination: \"/\" }\n        }\n    }\n    const csrfToken = await getCsrfToken(context);\n    const providers = await getProviders();\n\n    return {\n        props: { csrfToken, providers }\n    }\n}"]},"metadata":{},"sourceType":"module"}